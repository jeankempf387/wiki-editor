<!DOCTYPE html>
<html lang="fr">
<head>
  <meta charset="UTF-8" />
  <title>TipTap avec Math (KaTeX)</title>

  <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/katex@0.16.4/dist/katex.min.css" />
  <style>
    body { max-width: 700px; margin: 40px auto; font-family: Arial, sans-serif; }
    #editor { border: 1px solid #ccc; padding: 10px; min-height: 150px; border-radius: 5px; }
    .ProseMirror { outline: none; }
  </style>
</head>
<body>

<h1>TipTap Ã©diteur avec math (KaTeX)</h1>

<div id="editor"></div>

<script src="https://cdn.jsdelivr.net/npm/vue@3/dist/vue.global.prod.js"></script>
<script src="https://cdn.jsdelivr.net/npm/@tiptap/core@2.0.0-beta.82/dist/tiptap.umd.js"></script>
<script src="https://cdn.jsdelivr.net/npm/@tiptap/starter-kit@2.0.0-beta.22/dist/tiptap-starter-kit.umd.js"></script>
<script src="https://cdn.jsdelivr.net/npm/@tiptap/extension-math@2.0.0-beta.24/dist/tiptap-extension-math.umd.js"></script>
<script src="https://cdn.jsdelivr.net/npm/katex@0.16.4/dist/katex.min.js"></script>

<script>
  const { Editor } = window['@tiptap/core']
  const StarterKit = window['@tiptap/starter-kit'].default
  const MathExtension = window['@tiptap/extension-math'].default

  const editor = new Editor({
    element: document.querySelector('#editor'),
    extensions: [
      StarterKit,
      MathExtension.configure({
        inlineRenderer: (latex) => {
          return window.katex.renderToString(latex, { throwOnError: false })
        },
        blockRenderer: (latex) => {
          return window.katex.renderToString(latex, { throwOnError: false, displayMode: true })
        },
      }),
    ],
    content: `
      <p>Voici une formule inline : <math-inline>E=mc^2</math-inline></p>
      <p>Et une formule en bloc :</p>
      <math-display>\\int_a^b f(x) dx = F(b) - F(a)</math-display>
    `
  })
</script>

</body>
</html>
